<h2>Modificar Usuario</h2>

<form action="/usuarios/modifyUser" method="POST">
  <fieldset>

    <% if (mensaje) { %>
      <p><strong><%= mensaje %></strong></p>
    <% } %>

    <!-- 1) Campo oculto con el username original -->
    <input type="hidden" name="username" value="<%= usuario.username %>">

    <legend>Datos del usuario</legend>

    <!-- 2) Muestra el usuario actual (solo lectura) -->
    <div style="margin-bottom: 1rem;">
      <label for="actualUsuario">Usuario actual:</label>
      <input
        type="text"
        id="actualUsuario"
        value="<%= usuario.username %>"
        readonly
      >
    </div>

    <!-- 3) Campo para el nuevo nombre de usuario -->
    <div style="margin-bottom: 1rem;">
      <label for="nuevoUsuario">Nuevo usuario:</label>
      <input
        type="text"
        id="nuevoUsuario"
        name="usuario2"
        placeholder="Deja vacío para no cambiarlo"
      >
    </div>

    <!-- 4) Nueva contraseña, siempre vacío -->
    <div style="margin-bottom: 1rem;">
      <label for="pass2">Nueva contraseña:</label>
      <input
        type="password"
        id="pass2"
        name="pass2"
        placeholder="Deja vacío para no cambiarla"
      >
    </div>

    <!-- 5) Email, precargado -->
    <div style="margin-bottom: 1rem;">
      <label for="email">Correo electrónico:</label>
      <input
        type="email"
        id="email"
        name="email"
        value="<%= usuario.email %>"
        required
      >
    </div>

    <!-- 6) Rol, con el radio correspondiente marcado -->
    <div style="margin-bottom: 1rem;">
      <label>
        <input
          type="radio"
          name="tipoUsuario"
          value="A"
          <%= usuario.rol === RolesEnum.ADMIN ? 'checked' : '' %>
        > Admin
      </label>
      <label>
        <input
          type="radio"
          name="tipoUsuario"
          value="U"
          <%= usuario.rol === RolesEnum.USUARIO ? 'checked' : '' %>
        > Usuario
      </label>
    </div>

    <div>
      <button type="submit">Modificar usuario</button>
    </div>
  </fieldset>
</form>
